#pragma once
//------------------------------------------------------------------------------------------------------------------------------------------------------------------------
#include <Arduino.h>
#include "TinyVector.h"
//------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// класс для выполнения периодической работы через указанные интервалы времени
//------------------------------------------------------------------------------------------------------------------------------------------------------------------------
typedef void (*POnAction)(void* param);
//------------------------------------------------------------------------------------------------------------------------------------------------------------------------
typedef struct
{
  void* param;          
  POnAction onAction;        
  unsigned long duration;
  
} CoreAction;
//------------------------------------------------------------------------------------------------------------------------------------------------------------------------
typedef Vector<CoreAction> CoreActionsList;
//------------------------------------------------------------------------------------------------------------------------------------------------------------------------
class CoreScenario
{
    public:

      CoreScenario();

      bool enabled();
      void enable();
      void disable();
      void clear();
      void update();
      void add(CoreAction action);

    private:

          bool isEnabled;
          CoreActionsList* actions;
          size_t currentActionIndex;
          unsigned long timer;
  
};
//------------------------------------------------------------------------------------------------------------------------------------------------------------------------

